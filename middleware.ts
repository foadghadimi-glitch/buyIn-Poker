// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';

//const SUPABASE_URL = "https://pmjhsddknpkdxfbxtxrz.supabase.co";
const SUPABASE_URL = "https://tglohosjdjqmonnlvawe.supabase.co";
//const SUPABASE_PUBLISHABLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBtamhzZGRrbnBrZHhmYnh0eHJ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwMzE5NjcsImV4cCI6MjA3MDYwNzk2N30.1Ywq40hbd5teBxmfnsHimgvCtCuUU-XqAwhnxvAT7Lo";
const SUPABASE_PUBLISHABLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRnbG9ob3NqZGpxbW9ubmx2YXdlIiwicm9zZSI6ImFub24iLCJpYXQiOjE3NTU5ODg2MTUsImV4cCI6MjA3MTU2NDYxNX0.H7Hfi2uk_5G76gVIFQC1Ewbcj42XSvejp5GLpV3ryrc";

// Import the supabase client like this:
// import { supabase } from "@/integrations/supabase/client";

export const supabase = createClient(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {
  auth: {
    storage: localStorage,
    persistSession: true,
    autoRefreshToken: true,
  }
});

// --- FIX: Remove Supabase client usage and localStorage from Edge middleware ---
// Edge Functions do not support localStorage or browser APIs.
// Supabase client is not needed in middleware for static file skipping.

export function middleware(request: Request) {
  try {
    const url = new URL(request.url);

    // Example: Skip authentication for static files
    if (
      url.pathname.startsWith('/manifest.json') ||
      url.pathname.startsWith('/favicon') ||
      url.pathname.startsWith('/icon-')
    ) {
      // Allow request to proceed
      return new Response(null, { status: 200 });
    }

    // For now, just allow all requests
    return new Response(null, { status: 200 });
  } catch (err) {
    // Log error for debugging
    // Note: console.error may not work in Edge, but leave for debugging
    return new Response('Internal Server Error', { status: 500 });
  }
}

// Remove Supabase client creation from middleware
// ...existing code...